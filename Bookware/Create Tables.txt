

-- Opret en database der hedder BookwareDB

DROP TABLE [dbo].[Class_Book];
DROP TABLE [dbo].[Teacher_Class];
DROP TABLE [dbo].[Teacher_Edu];
DROP TABLE [dbo].[Edu_Sub];
DROP TABLE [dbo].[Book];
DROP TABLE [dbo].[Student];
DROP TABLE [dbo].[Education];
DROP TABLE [dbo].[Subject];
DROP TABLE [dbo].[Class];
DROP TABLE [dbo].[Teacher];


CREATE TABLE Teacher( Teacher_Id int NOT NULL PRIMARY KEY IDENTITY(1,1), Name varchar(50) NOT NULL);

CREATE TABLE Class( Class_Id int NOT NULL PRIMARY KEY IDENTITY(1,1), ClassName varchar(50) NOT NULL);

CREATE TABLE Subject( Subject_Id int NOT NULL PRIMARY KEY IDENTITY(1,1), SubjectName varchar(50) NOT NULL);

CREATE TABLE Education( Edu_Id int NOT NULL PRIMARY KEY IDENTITY(1,1), EduName varchar(50) NOT NULL);

CREATE TABLE Student( Student_Id int NOT NULL PRIMARY KEY IDENTITY(1,1), StudentName varchar(50) NOT NULL, Address varchar(100) NOT NULL, Semester int NOT NULL, StartDate DateTime NOT NULL, Class_Id int NOT NULL, FOREIGN KEY (Class_Id) REFERENCES Class(Class_Id));

CREATE TABLE Book( Book_Id int NOT NULL PRIMARY KEY IDENTITY(1,1), Title VARCHAR(50) NOT NULL, Author VARCHAR(50) NOT NULL, Year int NOT NULL, ISBN int NULL);

CREATE TABLE Edu_Sub( EduSub_Id int NOT NULL PRIMARY KEY IDENTITY(1,1), Edu_Id int NOT NULL, Subject_Id int NOT NULL, FOREIGN KEY (Edu_Id) REFERENCES Education(Edu_Id) ON UPDATE NO ACTION ON DELETE CASCADE, FOREIGN KEY (Subject_Id) REFERENCES Subject(Subject_Id) ON UPDATE NO ACTION ON DELETE CASCADE);

CREATE TABLE Teacher_Edu( TeachEdu_Id int NOT NULL PRIMARY KEY IDENTITY(1,1), Teacher_Id int NOT NULL, EduSub_Id int NOT NULL, FOREIGN KEY (Teacher_Id) REFERENCES Teacher(Teacher_Id) ON UPDATE NO ACTION ON DELETE CASCADE, FOREIGN KEY (EduSub_Id) REFERENCES Edu_Sub(EduSub_Id) ON UPDATE NO ACTION ON DELETE CASCADE);

CREATE TABLE Teacher_Class( TeachClass_Id int NOT NULL PRIMARY KEY IDENTITY(1,1), Class_Id int NOT NULL, TeachEdu_Id int NOT NULL, FOREIGN KEY (Class_Id) REFERENCES Class(Class_Id) ON UPDATE NO ACTION ON DELETE CASCADE, FOREIGN KEY (TeachEdu_Id) REFERENCES Teacher_Edu(TeachEdu_Id) ON UPDATE NO ACTION ON DELETE CASCADE);

CREATE TABLE Class_Book( CB_Id INT NOT NULL PRIMARY KEY IDENTITY(1,1), Class_Id INT NOT NULL, Book_Id INT NOT NULL, FOREIGN KEY (Class_Id) REFERENCES Class(Class_Id) ON UPDATE NO ACTION ON DELETE CASCADE, FOREIGN KEY (Book_Id) REFERENCES Book(Book_Id) ON UPDATE NO ACTION ON DELETE CASCADE );

